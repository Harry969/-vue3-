import{u as a,_ as r}from"./WrapperPost-DKdVlOhM.js";import{o as s,g as l,w as c,b as e,B as t}from"./app-B1EYvVvy.js";import"./dayjs.min-ptuWh-fm.js";import"./dark-nl6n56Pk.js";const B="第28期 - 大意碰车",y="2023/09/18",w="周六真的很倒霉，新车自己开着还撞了😭",f=["#Weekly"],v="https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/images车损.jpg",_="https://mmeme.me/og%2F28-%E5%A4%A7%E6%84%8F%E7%A2%B0%E8%BD%A6.png",D="周六真的很倒霉，新车自己开着还撞了😭",F=[{property:"og:title",content:"第28期 - 大意碰车"},{name:"twitter:title",content:"第28期 - 大意碰车"},{name:"description",content:"周六真的很倒霉，新车自己开着还撞了😭"},{property:"og:description",content:"周六真的很倒霉，新车自己开着还撞了😭"},{name:"twitter:description",content:"周六真的很倒霉，新车自己开着还撞了😭"},{property:"og:image",content:"https://mmeme.me/og%2F28-%E5%A4%A7%E6%84%8F%E7%A2%B0%E8%BD%A6.png"},{name:"twitter:image",content:"https://mmeme.me/og%2F28-%E5%A4%A7%E6%84%8F%E7%A2%B0%E8%BD%A6.png"},{name:"twitter:card",content:"summary_large_image"}],b={__name:"28-大意碰车",setup(m,{expose:p}){const n={title:"第28期 - 大意碰车",date:"2023/09/18",desc:"周六真的很倒霉，新车自己开着还撞了😭",tags:["#Weekly"],cover:"https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/images车损.jpg",image:"https://mmeme.me/og%2F28-%E5%A4%A7%E6%84%8F%E7%A2%B0%E8%BD%A6.png",description:"周六真的很倒霉，新车自己开着还撞了😭",meta:[{property:"og:title",content:"第28期 - 大意碰车"},{name:"twitter:title",content:"第28期 - 大意碰车"},{name:"description",content:"周六真的很倒霉，新车自己开着还撞了😭"},{property:"og:description",content:"周六真的很倒霉，新车自己开着还撞了😭"},{name:"twitter:description",content:"周六真的很倒霉，新车自己开着还撞了😭"},{property:"og:image",content:"https://mmeme.me/og%2F28-%E5%A4%A7%E6%84%8F%E7%A2%B0%E8%BD%A6.png"},{name:"twitter:image",content:"https://mmeme.me/og%2F28-%E5%A4%A7%E6%84%8F%E7%A2%B0%E8%BD%A6.png"},{name:"twitter:card",content:"summary_large_image"}]};return p({frontmatter:n}),a({title:"第28期 - 大意碰车",meta:[{property:"og:title",content:"第28期 - 大意碰车"},{name:"twitter:title",content:"第28期 - 大意碰车"},{name:"description",content:"周六真的很倒霉，新车自己开着还撞了😭"},{property:"og:description",content:"周六真的很倒霉，新车自己开着还撞了😭"},{name:"twitter:description",content:"周六真的很倒霉，新车自己开着还撞了😭"},{property:"og:image",content:"https://mmeme.me/og%2F28-%E5%A4%A7%E6%84%8F%E7%A2%B0%E8%BD%A6.png"},{name:"twitter:image",content:"https://mmeme.me/og%2F28-%E5%A4%A7%E6%84%8F%E7%A2%B0%E8%BD%A6.png"},{name:"twitter:card",content:"summary_large_image"}]}),(d,i)=>{const o=r;return s(),l(o,{frontmatter:n},{default:c(()=>i[0]||(i[0]=[e("div",{class:"prose m-auto slide-enter-content"},[e("p",null,[e("div",{class:"table-of-contents"},[e("div",{class:"table-of-contents-anchor hidden"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M3 4h18v2H3zm0 7h12v2H3zm0 7h18v2H3z"})])]),e("ul",null,[e("li",null,[e("a",{href:"#技术相关"},"技术相关 ")]),e("li",null,[e("a",{href:"#生活相关"},"生活相关 ")]),e("li",null,[e("a",{href:"#本周阅读"},"本周阅读 ")])])])]),e("p",{align:"center"},[e("img",{alt:"车损",src:"https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/images车损.jpg",width:"800"})]),e("h2",{id:"技术相关",tabindex:"-1"},[t("技术相关 "),e("a",{class:"header-anchor",href:"#技术相关","aria-hidden":"true"},"#")]),e("p",null,[e("strong",null,"What holidays")]),e("p",null,[e("img",{src:"https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/imagesholiday.gif",alt:"holiday"})]),e("p",null,"在做的时候，有一个小小曲折的事情。"),e("p",null,[t("地图弹窗或者图标支持自定义 DOM 的话，其实都可以通过自己写 DOM 字符串，或者组件虚拟 DOM 转成真实 DOM 后给地图的 API ，也可以 Web Components ( Lit | Vue/ce.vue | 原生) 。 但是我想看看能否在地图上挂载后（自定义 DOM 图标或 Popup），继续双向绑定。 记得在 Vue2 中使用 Vue.extend 的思路，先创建一个 DOM ，将 DOM 挂载到地图上，生成图标或弹窗，然后再将 Vue 实例挂载 DOM 上去。 现在 Vue3 中，使用 createApp ，跟上面同样的思路，也实现了上述需求。虽然是创建了两个 Vue 实例，但是 Pinia 还是通用的，但是测试的时候发现 "),e("code",null,"const router = useRouter()"),t(" 是失效的，毕竟其实是创建两个 Vue 实例。 于是便想通过 Pinia 做一层代理，通过在自定义的 DOM 弹窗调用 Pinia 的 Action ，然后 Action 中调用 Router 函数，也是能达到目的，不过 Pinia 应该是 setup 的写法，具体为什么需要这种写法没有深究。")]),e("p",null,"然后就是在 Pinia 持久化中，其实 watch 一下存到 localstorage 中就行，不是很复杂，但是有现成的，就不手写了。 刚开始使用了 pinia-plugin-persist ，但是发现似乎性能影像蛮大，地图一卡一卡的，而且最近更新时间还是蛮久的。"),e("p",null,[t("于是换成了 pinia-plugin-persistedstate ， GitHub stars 还是蛮多的，但是使用过程中发现，持久化需要 state 是基本类型，引用类型的话需要是 ref 包起来，并且需要 serialize 和 deserialize 配置。当做完这些的时候，本以为会 OK ，但是在存储的时候，想将地图实例和 Popup 也存进去，毕竟地图实例只有一个，Popup 也只有一个。写的时候顺手将这两个也定义成了 "),e("code",null,"ref(map)"),t(" 和 "),e("code",null,"ref(popup)"),t("，并没有做持久化！")]),e("p",null,"但是这个时候发现地图有点卡，devTools 性能分析的时候，发现 Pinia 占用了很多内存，后来将 map 和 popup 定义成引用类型，而非 ref 包裹的响应式的时候，再看就好了很多。"),e("p",null,"总之，一不注意就落入性能陷阱，但也还是，小事情在所难免。"),e("h2",{id:"生活相关",tabindex:"-1"},[t("生活相关 "),e("a",{class:"header-anchor",href:"#生活相关","aria-hidden":"true"},"#")]),e("p",null,"这周工作内容很累，周六还在加班。下午五六点回家，觉得天气还不错，叫春春一起出去玩，无目的性。然后开车导航去了长江边上，下关火车主题公园，我的评价是，索然无味。"),e("p",null,[e("img",{src:"https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/images%E5%90%88%E5%BD%B1.jpg",alt:"合影"})]),e("p",null,"春春一天都没吃东西，我也很饿了，想吃火锅或者必胜客。然后导航去了附近的海底捞，商场人很多很多，停车停了好久。最后去商场，在海底捞拍号，微信小程序上显示还有一百多桌，差不多要俩三小时。。。我们就准备去商场别的火锅店看看，但是逛了一圈似乎没什么我们爱吃的。"),e("p",null,"最后打算回马群吃，先拍号，车开到家估计也差不多三四十分钟。开呀开呀开，终于到地方，一看排号进度，还有一俩小时。算了，吃别的吧。然后去找了一家看着还行的火锅店。一看菜单，感觉就点了两三盘肉，三百四了，有点点小贵，最后怕吃不饱点了份面条。"),e("p",null,"上来锅底和肉后，开开心心下食材，然后静静等着吃。突然，春春发现清汤锅底有根头发，幸好我们一口还没吃。唉~~~ 经理过来处理，下的两盘肉重新上，之前那两盘剩的半份也继续吃，那我们也无所谓了。"),e("p",null,"吃完之后，准备美美地回家。在十字路口，有个车过了斑马线后，停在了那里，感觉像是滴滴接客的。因为那个十字路口南方是在修路，所以那里停应该不违章吧（我没有那么了解），但是我在他后面，他不走我也走不了。不过我看他右边留了一个车身，于是想从右边过去，起步给油，直接副驾驶车门装上栅栏水泥柱。唉~~~ 新车变事故车了😭"),e("p",null,[e("img",{src:"https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/images%E7%A2%B0%E8%BD%A6.jpg",alt:"碰车"})]),e("p",null,"回去问了之前买车的销售，说让我们走保险吧，否则维修要几千块。然后从小到大第一次报保险经历就来了。由于刚才在事故地忘记拍照了，第二天白天还要去拍，然后将车送到 4S 店维修就行了。"),e("p",null,[e("img",{src:"https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/images4s%E7%BB%B4%E4%BF%AE.jpg",alt:"4s维修"})]),e("p",null,"唉~~~倒霉。当时怎么走也不会碰到，脑子卡住了，非不按滴，直接过，过完碰着了，又因为后车一直在滴我们，我就直接开走了。唉，下次就多了些处理经验。"),e("h2",{id:"本周阅读",tabindex:"-1"},[t("本周阅读 "),e("a",{class:"header-anchor",href:"#本周阅读","aria-hidden":"true"},"#")])],-1)])),_:1})}}};export{v as cover,y as date,b as default,w as desc,D as description,_ as image,F as meta,f as tags,B as title};
