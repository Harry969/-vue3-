import{U as _t}from"./ShadowCard-BFHpdnaz.js";import{d as ht,s as B,y as lt,o as Z,c as Q,A as wt,f as T,b as W,F as yt,z as Ct,r as xt,g as st,w as it,e as Mt,C as kt}from"./app-B1EYvVvy.js";function ut(t,e,l,f=h=>h){return t*f(.5-e*(.5-l))}function Pt(t){return[-t[0],-t[1]]}function k(t,e){return[t[0]+e[0],t[1]+e[1]]}function y(t,e){return[t[0]-e[0],t[1]-e[1]]}function M(t,e){return[t[0]*e,t[1]*e]}function bt(t,e){return[t[0]/e,t[1]/e]}function X(t){return[t[1],-t[0]]}function at(t,e){return t[0]*e[0]+t[1]*e[1]}function Dt(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ft(t){return Math.hypot(t[0],t[1])}function zt(t){return t[0]*t[0]+t[1]*t[1]}function ct(t,e){return zt(y(t,e))}function gt(t){return bt(t,Ft(t))}function St(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function Y(t,e,l){let f=Math.sin(l),h=Math.cos(l),_=t[0]-e[0],C=t[1]-e[1],n=_*h-C*f,g=_*f+C*h;return[n+e[0],g+e[1]]}function et(t,e,l){return k(t,M(y(e,t),l))}function pt(t,e,l){return k(t,M(e,l))}var{min:V,PI:At}=Math,ft=.275,$=At+1e-4;function Lt(t,e={}){let{size:l=16,smoothing:f=.5,thinning:h=.5,simulatePressure:_=!0,easing:C=r=>r,start:n={},end:g={},last:v=!1}=e,{cap:x=!0,easing:w=r=>r*(2-r)}=n,{cap:E=!0,easing:p=r=>--r*r*r+1}=g;if(t.length===0||l<=0)return[];let u=t[t.length-1].runningLength,d=n.taper===!1?0:n.taper===!0?Math.max(l,u):n.taper,A=g.taper===!1?0:g.taper===!0?Math.max(l,u):g.taper,j=Math.pow(l*f,2),o=[],m=[],P=t.slice(0,10).reduce((r,c)=>{let s=c.pressure;if(_){let i=V(1,c.distance/l),K=V(1,1-i);s=V(1,r+(K-r)*(i*ft))}return(r+s)/2},t[0].pressure),a=ut(l,h,t[t.length-1].pressure,C),N,q=t[0].vector,D=t[0].point,U=D,b=D,L=U,G=!1;for(let r=0;r<t.length;r++){let{pressure:c}=t[r],{point:s,vector:i,distance:K,runningLength:I}=t[r];if(r<t.length-1&&u-I<3)continue;if(h){if(_){let S=V(1,K/l),tt=V(1,1-S);c=V(1,P+(tt-P)*(S*ft))}a=ut(l,h,c,C)}else a=l/2;N===void 0&&(N=a);let vt=I<d?w(I/d):1,dt=u-I<A?p((u-I)/A):1;a=Math.max(.01,a*Math.min(vt,dt));let nt=(r<t.length-1?t[r+1]:t[r]).vector,R=r<t.length-1?at(i,nt):1,mt=at(i,q)<0&&!G,rt=R!==null&&R<0;if(mt||rt){let S=M(X(q),a);for(let tt=1/13,O=0;O<=1;O+=tt)b=Y(y(s,S),s,$*O),o.push(b),L=Y(k(s,S),s,$*-O),m.push(L);D=b,U=L,rt&&(G=!0);continue}if(G=!1,r===t.length-1){let S=M(X(i),a);o.push(y(s,S)),m.push(k(s,S));continue}let ot=M(X(et(nt,i,R)),a);b=y(s,ot),(r<=1||ct(D,b)>j)&&(o.push(b),D=b),L=k(s,ot),(r<=1||ct(U,L)>j)&&(m.push(L),U=L),P=c,q=i}let F=t[0].point.slice(0,2),z=t.length>1?t[t.length-1].point.slice(0,2):k(t[0].point,[1,1]),J=[],H=[];if(t.length===1){if(!(d||A)||v){let r=pt(F,gt(X(y(F,z))),-(N||a)),c=[];for(let s=1/13,i=s;i<=1;i+=s)c.push(Y(r,F,$*2*i));return c}}else{if(!(d||A&&t.length===1))if(x)for(let c=1/13,s=c;s<=1;s+=c){let i=Y(m[0],F,$*s);J.push(i)}else{let c=y(o[0],m[0]),s=M(c,.5),i=M(c,.51);J.push(y(F,s),y(F,i),k(F,i),k(F,s))}let r=X(Pt(t[t.length-1].vector));if(A||d&&t.length===1)H.push(z);else if(E){let c=pt(z,r,a);for(let s=1/29,i=s;i<1;i+=s)H.push(Y(c,z,$*3*i))}else H.push(k(z,M(r,a)),k(z,M(r,a*.99)),y(z,M(r,a*.99)),y(z,M(r,a)))}return o.concat(H,m.reverse(),J)}function Bt(t,e={}){var l;let{streamline:f=.5,size:h=16,last:_=!1}=e;if(t.length===0)return[];let C=.15+(1-f)*.85,n=Array.isArray(t[0])?t:t.map(({x:p,y:u,pressure:d=.5})=>[p,u,d]);if(n.length===2){let p=n[1];n=n.slice(0,-1);for(let u=1;u<5;u++)n.push(et(n[0],p,u/4))}n.length===1&&(n=[...n,[...k(n[0],[1,1]),...n[0].slice(2)]]);let g=[{point:[n[0][0],n[0][1]],pressure:n[0][2]>=0?n[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],v=!1,x=0,w=g[0],E=n.length-1;for(let p=1;p<n.length;p++){let u=_&&p===E?n[p].slice(0,2):et(w.point,n[p],C);if(Dt(w.point,u))continue;let d=St(u,w.point);if(x+=d,p<E&&!v){if(x<h)continue;v=!0}w={point:u,pressure:n[p][2]>=0?n[p][2]:.5,vector:gt(y(w.point,u)),distance:d,runningLength:x},g.push(w)}return g[0].vector=((l=g[1])==null?void 0:l.vector)||[0,0],g}function Et(t,e={}){return Lt(Bt(t,e),e)}const Nt={class:"relative h-60vh w-full"},Ut=["d"],Vt=["d","stroke","fill"],Zt=ht({__name:"FreeDraw",setup(t){function e(o){if(!o.length)return"";const m=o.reduce((P,[a,N],q,D)=>{const[U,b]=D[(q+1)%D.length];return P.push(a,N,(a+U)/2,(N+b)/2),P},["M",...o[0],"Q"]);return m.push("Z"),m.join(" ")}const l=B(!0),f={size:16,smoothing:.5,thinning:.5,streamline:.5,easing:o=>o,start:{taper:0,cap:!0},end:{taper:0,cap:!0}},h={size:18,start:{taper:!0}},_=B("#000000");async function C(o){_.value="#000000"}const n=B(!1);async function g(o){n.value=!1}const v=B([]),x=B(""),w=B([]);lt(()=>v.value,()=>{const o=n.value?f:h,m=Et(v.value,o);x.value=e(m)},{deep:!0}),lt(l,o=>{x.value="",v.value=[],w.value=[]});async function E(o){o.target.setPointerCapture(o.pointerId),await C(),await g(),v.value=[[o.clientX,o.clientY,o.pressure??.5]],n.value||j()}function p(o){o.buttons===1&&l.value&&(v.value=[...v.value,[o.offsetX,o.offsetY,o.pressure]])}let u=0,d=0;function A(o){cancelAnimationFrame(d),n.value&&w.value.push({path:x.value,color:_.value}),x.value=""}function j(){const o=Date.now();o-u>32&&v.value.length>1&&(v.value.splice(0,Math.ceil(v.value.length*.1)),u=o),d=requestAnimationFrame(j)}return(o,m)=>(Z(),Q("div",Nt,[(Z(),Q("svg",{class:"absolute left-0 top-0 h-full w-full touch-none border-[5px] border-[var(--modal-border)] border-solid",style:wt({pointerEvents:T(l)?"auto":"none"}),onPointerdown:E,onPointermove:p,onPointerup:A},[W("path",{d:T(x),stroke:"currentColor",fill:"currentColor"},null,8,Ut),(Z(!0),Q(yt,null,Ct(T(w),(P,a)=>(Z(),Q("path",{key:a,d:P.path,stroke:P.color,fill:P.color},null,8,Vt))),128))],36))]))}}),It=ht({__name:"MouseTail",setup(t){const e=B(!1);return(l,f)=>{const h=Zt,_=xt("client-only"),C=_t;return Z(),st(C,{class:"!p-[5px]"},{default:it(()=>[W("div",{class:"grid h-full w-full place-items-center text-[--text-color]",onClick:f[0]||(f[0]=n=>e.value=!0)},f[1]||(f[1]=[W("svg",{class:"pointer-events-auto scale-150 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor"},[W("path",{fill:"currentColor",d:"M1.981 12.472c-.143.222.115.529.351.413.815-.4 1.604-.823 2.375-1.288.227-.137.476.108.329.328-1.904 2.857-6.632 9.873-1.427 10.333 3.16.279 6.33-2.296 9.304-4.985.219-.197.525.062.361.307-2.42 3.634-6.859 11.056-1.025 11.41 5.074.308 3.904-4.392 15.43-10.738.838-.46 1.102-1.412.892-2.34-.372-1.994-4.135-1.962-6.224-1.414-.255.067-.5-.253-.329-.453 2.546-2.986 9.853-10.44 5.252-12.768C23.219-.77 13.918 8.898 9.965 12.541c-.208.191-.435-.022-.267-.25 1.944-2.638 4.488-5.56 4.945-8.597a1.807 1.807 0 0 0-.238-1.214 2.057 2.057 0 0 0-.971-.854C9.124-.284 4.203 9.028 1.98 12.472Z"})],-1)])),Mt(_,null,{default:it(()=>[T(e)?(Z(),st(h,{key:0})):kt("",!0)]),_:1})]),_:1})}}});export{It as default};
